import { Component, ViewChild } from '@angular/core';
import { Router } from '@angular/router';
import { LoginComponent } from './login/login.component';
import { RoutecheckService } from './routecheck.service';
import {MatIconRegistry} from '@angular/material/icon';
import { DomSanitizer } from '@angular/platform-browser';

const THUMBUP_ICON = `<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 620.000000 800.000000"
 preserveAspectRatio="xMidYMid meet">
<g transform="translate(0.000000,800.000000) scale(0.100000,-0.100000)"
fill="#45b3f3" stroke="none">
<path d="M2938 6575 c-3 -4 -23 -8 -45 -10 -21 -1 -51 -8 -66 -14 -16 -6 -35
-11 -44 -11 -9 0 -22 -8 -29 -17 -7 -10 -14 -13 -14 -6 0 15 -99 -23 -117 -46
-10 -11 -13 -11 -13 -2 0 7 -9 3 -20 -10 -14 -17 -20 -20 -20 -9 0 12 -3 11
-11 -2 -5 -10 -17 -18 -24 -18 -8 0 -15 -7 -15 -16 0 -8 -4 -13 -9 -9 -5 3
-16 -2 -24 -10 -9 -8 -19 -15 -24 -15 -4 0 -14 -9 -21 -20 -7 -12 -16 -19 -20
-16 -10 6 -37 -16 -45 -38 -4 -11 -13 -16 -22 -12 -11 4 -15 -1 -15 -17 0 -18
-2 -19 -10 -7 -9 13 -14 7 -11 -12 0 -5 -6 -8 -14 -8 -13 0 -14 -4 -5 -20 8
-15 8 -18 -3 -14 -8 3 -24 -9 -38 -26 -13 -18 -30 -38 -36 -45 -7 -8 -13 -18
-13 -24 0 -6 -5 -11 -11 -11 -5 0 -8 -4 -5 -9 3 -5 -4 -11 -17 -15 -15 -4 -18
-9 -10 -14 8 -5 5 -13 -11 -27 -21 -18 -21 -21 -7 -32 14 -10 14 -11 -4 -10
-12 1 -21 -5 -23 -18 -2 -11 -7 -22 -11 -25 -9 -7 -34 -62 -38 -85 -2 -11 -8
-31 -13 -45 -6 -14 -11 -37 -12 -52 -1 -16 -5 -28 -9 -28 -11 0 -20 -77 -25
-235 -5 -132 -3 -163 17 -255 13 -60 30 -110 38 -117 11 -9 12 -12 3 -13 -9 0
-10 -5 -3 -19 6 -10 8 -21 4 -24 -3 -4 2 -9 11 -13 9 -3 16 -17 16 -30 0 -13
5 -24 10 -24 6 0 10 -7 10 -16 0 -9 8 -23 18 -30 11 -9 13 -13 4 -14 -7 0 -1
-11 14 -25 16 -15 21 -25 13 -25 -8 0 -1 -11 16 -26 17 -14 29 -30 27 -35 -3
-11 15 -12 21 -1 2 4 3 3 2 -3 -1 -5 2 -20 6 -33 7 -18 14 -22 31 -17 13 3 19
3 13 -2 -16 -13 -14 -43 2 -43 8 0 11 -4 8 -10 -3 -5 1 -10 9 -10 9 0 15 -6
14 -12 -2 -7 3 -12 10 -10 6 1 12 -4 12 -11 0 -18 32 -18 45 0 9 12 11 11 11
-6 0 -11 -4 -17 -8 -15 -4 3 -8 1 -8 -4 0 -12 34 -42 48 -42 6 0 15 -7 20 -17
6 -10 16 -14 26 -10 10 4 15 3 11 -3 -8 -12 22 -43 44 -47 8 -1 21 -10 28 -19
8 -11 13 -13 13 -5 0 7 5 9 12 5 8 -5 9 -2 5 10 -4 10 -3 15 4 11 5 -4 7 -16
3 -27 -5 -16 -3 -20 10 -15 8 3 19 0 23 -7 10 -15 85 -46 113 -46 11 0 20 -4
20 -9 0 -5 12 -11 28 -14 15 -2 62 -12 106 -21 90 -20 342 -18 431 3 28 7 65
15 83 18 17 3 32 9 32 14 0 5 9 9 19 9 11 0 23 5 26 10 4 6 10 8 15 5 12 -8
62 17 83 40 17 20 17 20 11 0 -5 -19 -5 -19 9 -2 8 9 19 17 25 17 6 0 12 4 14
10 2 5 13 11 25 13 12 2 31 13 41 25 11 12 24 22 31 22 6 0 11 5 11 10 0 6 8
14 18 17 9 4 31 22 48 41 22 23 33 29 37 20 4 -9 6 -7 6 5 1 9 9 17 19 17 14
0 15 2 2 10 -12 8 -10 10 10 10 20 0 22 2 10 10 -12 8 -11 10 7 10 17 0 21 5
19 24 -2 17 1 23 11 19 9 -3 16 2 19 15 3 11 15 24 27 30 12 6 16 11 9 11 -7
1 -1 13 15 27 17 17 23 28 16 31 -16 6 16 43 37 43 12 0 13 2 1 9 -11 7 -9 11
8 20 12 7 19 16 16 21 -3 5 -1 11 5 15 5 3 10 17 10 31 0 13 5 24 11 24 6 0 9
6 7 12 -3 7 2 19 10 27 13 13 12 16 -4 21 -18 7 -18 7 1 14 17 5 25 25 43 114
41 197 25 459 -36 592 -9 19 -17 37 -17 40 -8 43 -19 70 -27 70 -6 0 -8 7 -4
15 3 8 -4 21 -15 29 -15 10 -17 15 -7 19 9 4 7 6 -4 6 -10 1 -18 8 -18 16 0
17 -16 20 -25 5 -3 -5 -1 -10 5 -10 6 0 8 -4 5 -10 -3 -5 -1 -10 6 -10 7 0 10
-3 6 -6 -10 -11 -32 11 -33 33 -1 12 1 22 5 21 28 -3 31 4 10 26 -13 14 -22
26 -19 28 3 2 -10 17 -27 34 -18 17 -33 36 -33 42 0 6 -9 14 -21 17 -12 4 -18
12 -15 21 4 10 -3 14 -22 15 -15 0 -21 3 -14 6 9 3 7 10 -9 24 -12 10 -26 19
-31 19 -4 0 -8 7 -8 15 0 8 -5 15 -11 15 -7 0 -24 13 -40 29 -22 23 -29 26
-33 14 -3 -8 -3 -20 1 -25 3 -7 1 -8 -5 -4 -8 4 -12 0 -12 -11 0 -14 -2 -15
-9 -4 -7 11 -9 11 -13 0 -3 -9 -6 -8 -11 5 -5 11 -3 15 5 10 8 -5 9 -2 4 11
-5 15 -4 16 9 5 18 -15 20 0 3 20 -11 12 -10 12 5 1 12 -9 17 -10 17 -2 0 6
-11 16 -25 23 -13 6 -22 15 -19 19 3 5 -6 9 -20 9 -14 0 -26 5 -26 10 0 14
-27 12 -34 -2 -3 -7 -3 -3 -1 9 3 12 1 24 -5 28 -5 3 -10 0 -10 -7 0 -8 -5 -6
-11 5 -5 9 -19 17 -29 17 -10 0 -21 4 -24 9 -4 5 -24 12 -46 16 -22 4 -40 11
-40 16 0 5 -12 9 -26 9 -14 0 -35 5 -47 12 -12 6 -35 13 -52 15 -67 8 -370 14
-377 8z"/>
<path d="M2975 4305 c-5 -2 -50 -8 -100 -14 -49 -5 -91 -14 -93 -19 -1 -5 -11
-8 -21 -5 -25 6 -131 -26 -131 -40 0 -8 -3 -8 -9 1 -6 11 -13 11 -37 0 -16 -7
-35 -19 -43 -26 -7 -7 -20 -11 -27 -8 -7 3 -26 -1 -41 -9 -15 -8 -40 -18 -55
-24 -16 -6 -28 -15 -28 -20 0 -6 -7 -8 -15 -5 -8 4 -15 1 -15 -6 0 -6 -4 -8
-10 -5 -5 3 -10 2 -10 -3 0 -6 7 -12 15 -16 8 -3 15 -11 15 -18 0 -8 -3 -9 -8
-3 -4 6 -15 17 -25 24 -17 13 -18 13 -15 -4 2 -14 -3 -20 -19 -21 -13 -1 -23
3 -23 9 0 5 -9 0 -19 -12 -14 -16 -21 -18 -24 -9 -4 9 -6 9 -6 -2 -1 -18 -64
-61 -92 -63 -10 -1 -22 -9 -25 -19 -3 -10 -14 -18 -25 -18 -10 0 -19 -7 -19
-15 0 -8 -4 -15 -10 -15 -5 0 -19 -9 -30 -20 -11 -11 -20 -15 -20 -9 0 6 -7 4
-15 -5 -8 -8 -15 -19 -15 -25 0 -6 -4 -11 -10 -11 -5 0 -10 -5 -10 -11 0 -6 7
-8 16 -5 8 3 12 2 9 -4 -3 -5 -19 -7 -35 -5 -31 4 -40 -8 -36 -47 3 -24 0 -26
-41 -29 -27 -2 -45 -20 -38 -38 3 -8 3 -12 -1 -9 -11 12 -46 -12 -40 -27 3 -9
0 -12 -9 -9 -14 6 -40 -30 -31 -44 2 -4 -4 -9 -15 -9 -21 -2 -37 -16 -56 -51
-17 -29 -16 -40 5 -46 14 -4 13 -4 -3 -3 -35 2 -65 -13 -65 -34 0 -10 -13 -33
-30 -51 -16 -17 -30 -37 -30 -44 0 -7 -10 -21 -23 -31 -13 -10 -22 -23 -20
-29 2 -5 -6 -20 -17 -32 -11 -11 -20 -25 -20 -31 0 -5 -3 -11 -7 -13 -11 -4
-43 -67 -43 -84 0 -8 -4 -14 -10 -14 -5 0 -10 -9 -10 -20 0 -11 -5 -20 -11
-20 -5 0 -7 -5 -4 -10 4 -6 11 -7 17 -4 6 4 6 -2 -1 -15 -13 -24 -23 -28 -15
-6 8 19 -3 19 -22 1 -11 -11 -11 -16 -1 -19 9 -4 9 -6 0 -6 -7 -1 -13 -5 -13
-11 0 -5 -14 -39 -30 -76 -17 -37 -29 -69 -26 -72 3 -3 0 -10 -7 -16 -12 -10
-30 -58 -56 -151 -6 -22 -22 -74 -35 -115 -35 -111 -39 -139 -26 -155 14 -17
5 -35 -18 -35 -11 0 -13 -3 -5 -11 8 -8 7 -18 -3 -38 -7 -15 -15 -52 -16 -84
-2 -31 -5 -57 -8 -57 -21 0 -42 -475 -22 -494 4 -4 7 -13 7 -19 0 -7 8 -12 17
-12 10 0 31 -12 47 -27 16 -16 35 -28 41 -28 7 0 24 -7 38 -15 34 -19 122 -57
142 -61 8 -2 37 -8 64 -13 26 -6 52 -9 56 -6 5 3 10 1 12 -5 1 -5 28 -15 58
-21 30 -6 73 -15 95 -20 22 -5 69 -14 105 -20 36 -6 90 -15 120 -20 30 -5 126
-16 213 -24 87 -8 166 -16 175 -19 96 -28 1507 -28 1603 0 9 2 86 11 170 19
153 15 210 22 344 45 39 7 85 14 103 17 17 3 32 8 32 12 0 3 14 7 32 8 18 1
71 12 118 24 47 12 92 22 100 23 8 1 25 8 38 15 12 6 26 9 31 7 5 -3 11 0 14
7 3 7 31 22 62 33 32 10 60 25 62 31 3 7 12 13 19 13 8 0 17 7 20 15 4 8 12
15 20 15 8 0 14 7 14 15 0 8 5 15 10 15 6 0 10 54 10 143 0 130 -10 235 -41
432 -6 39 -12 77 -13 85 -10 69 -51 216 -98 355 -11 33 -22 73 -25 88 -3 16
-11 26 -17 24 -6 -3 -11 7 -12 22 -1 14 -13 52 -27 84 -15 32 -27 62 -27 67 0
6 -6 10 -12 10 -9 0 -8 4 2 10 8 5 10 10 4 10 -6 0 -19 18 -30 40 -10 22 -22
40 -26 40 -5 0 -8 9 -8 21 0 13 -5 19 -12 16 -9 -3 -13 6 -14 26 -1 17 -6 33
-13 35 -6 2 -11 10 -11 18 0 8 -4 14 -10 14 -5 0 -10 7 -10 15 0 8 -5 15 -11
15 -6 0 -9 7 -5 15 3 8 1 15 -3 15 -12 0 -71 97 -64 104 4 3 1 6 -6 6 -18 0
-38 23 -33 38 2 6 -1 12 -8 12 -15 0 -60 50 -60 67 0 17 -18 37 -43 46 -11 4
-21 16 -24 27 -3 11 -10 20 -17 19 -20 -4 -49 13 -36 21 7 4 1 18 -19 39 -17
18 -35 30 -41 26 -5 -3 -7 0 -4 8 3 8 -6 21 -20 31 -15 9 -26 23 -26 32 0 8
-4 13 -9 9 -10 -6 -51 32 -51 47 0 5 -4 6 -10 3 -5 -3 -10 1 -10 10 0 9 -4 14
-9 11 -5 -3 -14 1 -21 9 -7 8 -19 15 -26 15 -8 0 -14 7 -14 15 0 8 -6 15 -14
15 -8 0 -21 9 -29 20 -8 11 -16 17 -20 14 -3 -3 -16 1 -29 10 -26 19 -42 21
-32 4 4 -7 3 -8 -4 -4 -6 4 -9 13 -5 21 3 9 -1 15 -11 15 -9 0 -16 8 -17 18 0
14 -2 14 -9 -3 -5 -11 -9 -14 -9 -7 -1 17 -27 43 -35 35 -3 -3 -8 1 -12 10 -3
9 -12 13 -20 10 -7 -3 -16 1 -19 9 -3 7 -17 15 -32 16 -15 1 -29 6 -32 10 -10
14 -92 43 -103 36 -7 -4 -8 -2 -4 4 4 7 1 12 -9 12 -9 0 -34 9 -57 21 -33 17
-42 18 -49 7 -6 -9 -9 -9 -9 -1 0 31 -312 83 -485 82 -55 0 -104 -2 -110 -4z"/>
</g>
</svg>
`;
@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent {
  title = 'projectdemo';
  authCheck:boolean=false;
  isOpen:boolean = false;
  events: string[] = [];
  opened: boolean;
  username:any;
  shouldRun = [/(^|\.)plnkr\.co$/, /(^|\.)stackblitz\.io$/].some(h => h.test(window.location.host));
  @ViewChild(LoginComponent) logcheck;
  constructor(private authcheckService:RoutecheckService,private router:Router,iconRegistry: MatIconRegistry, sanitizer: DomSanitizer) {
    iconRegistry.addSvgIconLiteral('thumbs-up', sanitizer.bypassSecurityTrustHtml(THUMBUP_ICON));
    setInterval(() => {
      this.authChekFromStore();
    },1000);
  }

  authChekFromStore(){
    let authdata = JSON.parse(localStorage.getItem('auth'));
    if(authdata && authdata.isSuccess==true){
      this.authCheck=true;
      let user_details = JSON.parse(localStorage.getItem('user_details'));
      this.username= user_details?user_details.name:"USERNAME";
    }
  }

  logout(){
    this.authcheckService.signOut();
    this.authCheck=false;
    this.router.navigateByUrl('/login');
  }

}
